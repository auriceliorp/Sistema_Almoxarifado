{# ------------------------------ DETALHES DO ITEM ------------------------------ #}
{% extends 'base_simplificada.html' %}

{% block title %}Detalhes do Item{% endblock %}

{% block content %}
<div class="container py-4">

    {# ------------------------------ CABEÇALHO ------------------------------ #}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <a href="{{ url_for('item_bp.lista_itens') }}" class="btn btn-outline-primary">
            <i class="bi bi-arrow-left-circle"></i> Voltar
        </a>
        <h4 class="mb-0 text-center flex-grow-1">Detalhes do Item</h4>
        <div class="d-flex gap-2">
            <a href="{{ url_for('item_bp.editar_item', id=item.id) }}" class="btn btn-outline-primary">
                <i class="bi bi-pencil-square"></i> Editar
            </a>
            <button onclick="window.print()" class="btn btn-outline-secondary">
                <i class="bi bi-printer"></i> Imprimir
            </button>
        </div>
    </div>

    {# ------------------------------ DADOS DO ITEM ------------------------------ #}
    <div class="card shadow rounded-4">
        <div class="card-body">
            <dl class="row mb-0">
                <dt class="col-sm-4">Código SAP:</dt>
                <dd class="col-sm-8">{{ item.codigo_sap }}</dd>

                <dt class="col-sm-4">Código SIADS:</dt>
                <dd class="col-sm-8">{{ item.codigo_siads }}</dd>

                <dt class="col-sm-4">Nome:</dt>
                <dd class="col-sm-8">{{ item.nome }}</dd>

                <dt class="col-sm-4">Unidade de Medida:</dt>
                <dd class="col-sm-8">{{ item.unidade_medida }}</dd>

                <dt class="col-sm-4">Quantidade em Estoque:</dt>
                <dd class="col-sm-8">{{ item.estoque_atual }}</dd>

                <dt class="col-sm-4">Estoque Mínimo:</dt>
                <dd class="col-sm-8">{{ item.estoque_minimo }}</dd>

                <dt class="col-sm-4">Valor Unitário (R$):</dt>
                <dd class="col-sm-8">{{ "{:,.2f}".format(item.valor or 0) }}</dd>

                <dt class="col-sm-4">Saldo Financeiro (R$):</dt>
                <dd class="col-sm-8">{{ "{:,.2f}".format(item.saldo_financeiro or 0) }}</dd>

                <dt class="col-sm-4">Grupo:</dt>
                <dd class="col-sm-8">{{ item.grupo.nome if item.grupo }}</dd>

                <dt class="col-sm-4">Natureza de Despesa:</dt>
                <dd class="col-sm-8">
                    {{ item.grupo.natureza_despesa.codigo if item.grupo and item.grupo.natureza_despesa }}
                    - 
                    {{ item.grupo.natureza_despesa.nome if item.grupo and item.grupo.natureza_despesa }}
                </dd>

                <dt class="col-sm-4">Localização:</dt>
                <dd class="col-sm-8">{{ item.localizacao }}</dd>

                <dt class="col-sm-4">Data de Validade:</dt>
                <dd class="col-sm-8">
                    {{ item.data_validade.strftime('%d/%m/%Y') if item.data_validade else 'Não informado' }}
                </dd>

                <dt class="col-sm-4">Descrição:</dt>
                <dd class="col-sm-8">{{ item.descricao or 'Sem descrição' }}</dd>
            </dl>
        </div>
    </div>
</div>
{% endblock %}

