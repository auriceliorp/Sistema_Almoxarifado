{% extends "base.html" %}

{% set is_edit = natureza is defined %}
{% block title %}{{ "Editar" if is_edit else "Nova" }} Natureza de Despesa - Almoxarifado{% endblock %}

{% block content %}
<h2>{{ "Editar" if is_edit else "Nova" }} Natureza de Despesa (ND)</h2>

{# Usa form_data se houver erro e estiver recarregando, senão usa dados da natureza (se editando) #}
{% set current_data = form_data if form_data else natureza %}

<form method="POST" action="{{ url_for("main.editar_natureza_despesa", id=natureza.id) if is_edit else url_for("main.criar_natureza_despesa") }}">
    <div class="mb-3">
        <label for="codigo" class="form-label">Código <span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="codigo" name="codigo" value="{{ current_data.codigo if current_data else "" }}" required maxlength="20">
    </div>
    <div class="mb-3">
        <label for="descricao" class="form-label">Descrição <span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="descricao" name="descricao" value="{{ current_data.descricao if current_data else "" }}" required maxlength="255">
    </div>
    <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="ativa" name="ativa" {% if (current_data and current_data.ativa) or (not is_edit and not form_data) %}checked{% endif %}>
        <label class="form-check-label" for="ativa">Ativa</label>
    </div>

    <a href="{{ url_for("main.listar_naturezas_despesa") }}" class="btn btn-secondary">Cancelar</a>
    <button type="submit" class="btn btn-primary">{{ "Salvar Alterações" if is_edit else "Criar Natureza de Despesa" }}</button>
</form>

{% endblock %}

