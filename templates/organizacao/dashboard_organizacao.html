{% extends 'base_simplificada.html' %}

{% block content %}
<div class="container mt-4">
  <style>
    .nav-tabs .nav-link {
      background-color: #e9f3f1;
      color: #004b5b;
      border: none;
      border-radius: 0.25rem 0.25rem 0 0;
      margin-right: 4px;
    }

    .nav-tabs .nav-link.active {
      background-color: #d0e7e4;
      color: #004b5b;
      font-weight: bold;
      box-shadow: inset 0 -2px 5px rgba(0, 0, 0, 0.1);
    }

    .nav-tabs {
      border-bottom: 2px solid #bcd4d2;
    }
  </style>

  <h4 class="mb-4">Organização Administrativa</h4>

  <!-- Abas de navegação -->
  <ul class="nav nav-tabs mb-4" id="organizacaoTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" type="button" onclick="carregarConteudo('/nd')">Natureza de Despesa</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" type="button" onclick="carregarConteudo('/grupo')">Grupos</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" type="button" onclick="carregarConteudo('/ul')">Unidades Locais</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" type="button" onclick="carregarConteudo('/ul/areas')">Áreas</button>
    </li>
  </ul>

  <!-- Conteúdo carregado dinamicamente -->
  <div id="conteudo-dinamico">
    <!-- Natureza de Despesa será carregada automaticamente -->
  </div>
</div>

<!-- Script para carregar conteúdo via fetch -->
<script>
  function carregarConteudo(url) {
    fetch(url, { headers: { 'X-Requested-With': 'XMLHttpRequest' } })
      .then(res => res.text())
      .then(html => {
        document.getElementById('conteudo-dinamico').innerHTML = html;
      })
      .catch(err => {
        document.getElementById('conteudo-dinamico').innerHTML = '<div class="alert alert-danger">Erro ao carregar conteúdo.</div>';
        console.error(err);
      });
  }

  // Carregar automaticamente a aba ND ao entrar na página
  document.addEventListener('DOMContentLoaded', function () {
    carregarConteudo('/nd');
  });
</script>
{% endblock %}
