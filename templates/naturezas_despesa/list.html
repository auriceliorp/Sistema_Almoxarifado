{% extends "base.html" %}

{% block title %}Naturezas de Despesa - Almoxarifado{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Naturezas de Despesa (ND)</h2>
    <a href="{{ url_for("main.criar_natureza_despesa") }}" class="btn btn-success">+ Nova ND</a>
</div>

{% if naturezas %}
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col">Código</th>
            <th scope="col">Descrição</th>
            <th scope="col">Status</th>
            <th scope="col">Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for nd in naturezas %}
        <tr>
            <td>{{ nd.codigo }}</td>
            <td>{{ nd.descricao }}</td>
            <td>
                {% if nd.ativa %}
                    <span class="badge bg-success">Ativa</span>
                {% else %}
                    <span class="badge bg-secondary">Inativa</span>
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for("main.editar_natureza_despesa", id=nd.id) }}" class="btn btn-sm btn-outline-primary">Editar</a>
                <!-- Botão de Excluir (usando formulário POST para segurança) -->
                <form action="{{ url_for("main.excluir_natureza_despesa", id=nd.id) }}" method="POST" class="d-inline" onsubmit="return confirm("Tem certeza que deseja excluir esta Natureza de Despesa? Esta ação não pode ser desfeita.");">
                    <button type="submit" class="btn btn-sm btn-outline-danger">Excluir</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info" role="alert">
    Nenhuma Natureza de Despesa cadastrada ainda.
</div>
{% endif %}

{% endblock %}

